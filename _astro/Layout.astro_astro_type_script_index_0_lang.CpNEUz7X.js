/*! ------------------------------------------------
 * Project Name: Blayden - Personal Portfolio & Resume HTML Template
 * Project Description: Show yourself brightly with Blayden - clean and creative portfolio and resume template!
 * Tags: mix_design, resume, portfolio, personal page, cv, template, one page, responsive, html5, css3, creative, clean
 * Version: 1.0.0
 * Build Date: June 2024
 * Last Update: June 2024
 * This product is available exclusively on Themeforest
 * Author: mix_design
 * Author URI: https://themeforest.net/user/mix_design
 * File name: app.js
 * ------------------------------------------------

 * ------------------------------------------------
 * Table of Contents
 * ------------------------------------------------
 *
 *  01. Loader & Loading Animation
 *  02. Bootstrap Scroll Spy Plugin Settings
 *  03. Lenis Scroll Plugin
 *  04. Scroll to Top Button
 *  05. Stacking Cards
 *  06. Scroll Animations
 *  07. Fade-in Type Effect
 *  08. Blocks Marquee
 *  09. Parallax
 *  10. Swiper Slider
 *  11. Typed.js Plugin
 *  12. Magnific Popup
 *  13. Layout Masonry
 *  14. Smooth Scrolling
 *  15. Buttons Hover Effect
 *  16. SVG Fallback
 *  17. Chrome Smooth Scroll
 *  18. Images Moving Ban
 *  19. Detecting Mobile/Desktop
 *  20. PhotoSwipe Gallery Images Replace
 *  21. Contact Form
 *  22. Color Switch
 *
 * ------------------------------------------------
 * Table of Contents End
 * ------------------------------------------------ */gsap.registerPlugin(ScrollTrigger);const L=document.querySelector("body"),x=imagesLoaded(L),y=document.querySelector(".loading-wrap"),f=y?y.querySelectorAll(".loading__item"):[],h=document.querySelectorAll(".loading__fade");function q(){let e=document.querySelector(".loader__count .count__text"),t=0;function r(){if(t<100){let a=Math.floor(Math.random()*10)+1;t=Math.min(t+a,100),e.textContent=t;let o=Math.floor(Math.random()*120)+25;setTimeout(r,o)}}r()}q();x.on("done",e=>{_(),A()});function _(){gsap.to(".loader__count",{duration:.8,ease:"power2.in",y:"100%",delay:1.8}),gsap.to(".loader__wrapper",{duration:.8,ease:"power4.in",y:"-100%",delay:2.2}),setTimeout(()=>{document.getElementById("loader").classList.add("loaded")},3200)}function A(){gsap.set(f,{opacity:0}),gsap.to(f,{duration:1.1,ease:"power4",startAt:{y:120},y:0,opacity:1,delay:.8,stagger:.05},">-=1.1"),gsap.set(h,{opacity:0}),gsap.to(h,{duration:.8,ease:"none",opacity:1,delay:3.2})}const B=document.querySelectorAll("#menu .menu__link"),M=document.querySelectorAll("section[id]");function u(){const e=window.scrollY+100;M.forEach(t=>{const r=t.offsetTop,a=t.offsetHeight,o=t.getAttribute("id");if(e>=r&&e<r+a){B.forEach(n=>{n.classList.remove("active")});const i=document.querySelector(`#menu .menu__link[href="#${o}"]`);i&&(i.classList.add("active"),console.log("Active section:",o))}})}window.addEventListener("scroll",u);document.addEventListener("DOMContentLoaded",u);window.addEventListener("load",()=>{setTimeout(u,1e3)});new bootstrap.ScrollSpy(document.body,{target:"#menu",smoothScroll:!0,rootMargin:"0px 0px -25%"});const b=new Lenis;b.on("scroll",ScrollTrigger.update);gsap.ticker.add(e=>{b.raf(e*1e3)});gsap.ticker.lagSmoothing(0);const c=document.querySelector("#to-top");c&&(c.addEventListener("click",function(e){e.preventDefault()}),c.addEventListener("click",()=>gsap.to(window,{scrollTo:0,ease:"power4.inOut",duration:2})),gsap.set(c,{opacity:0}),gsap.to(c,{opacity:1,autoAlpha:1,scrollTrigger:{trigger:"body",start:"top -20%",end:"top -20%",toggleActions:"play none reverse none"}}));window.addEventListener("DOMContentLoaded",()=>{let e;function t(){const o=document.querySelectorAll(".stack-item"),i=document.querySelector(".stack-offset"),n=gsap.timeline();let s;if(o.length&&i){let d=function(){n.clear(),s=o[0].offsetWidth,o.forEach((m,g)=>{g>0&&(gsap.set(m,{x:g*s}),n.to(m,{x:0,duration:g*.5,ease:"none"},0))})};var Y=d;d(),e=ScrollTrigger.create({trigger:".stack-wrapper",start:"top top",pin:!0,end:()=>`+=${o.length*s+i.offsetWidth}`,scrub:!0,animation:n,invalidateOnRefresh:!0}),ScrollTrigger.addEventListener("refreshInit",d),ScrollTrigger.refresh()}}function r(){e&&(e.kill(),e=null),gsap.set(".stack-item",{clearProps:"all"})}function a(){window.innerWidth>=768?e||t():r()}a(),window.addEventListener("resize",a)});const I=document.querySelectorAll(".animate-in-up");I.forEach(e=>{gsap.fromTo(e,{opacity:0,y:50,ease:"sine"},{y:0,opacity:1,scrollTrigger:{trigger:e,toggleActions:"play none none reverse"}})});document.querySelector(".animate-card-2")&&(gsap.set(".animate-card-2",{y:100,opacity:0}),ScrollTrigger.batch(".animate-card-2",{interval:.1,batchMax:2,duration:6,onEnter:e=>gsap.to(e,{opacity:1,y:0,ease:"sine",stagger:{each:.15,grid:[1,2]},overwrite:!0}),onLeave:e=>gsap.set(e,{opacity:1,y:0,overwrite:!0}),onEnterBack:e=>gsap.to(e,{opacity:1,y:0,stagger:.15,overwrite:!0}),onLeaveBack:e=>gsap.set(e,{opacity:0,y:100,overwrite:!0})}),ScrollTrigger.addEventListener("refreshInit",()=>gsap.set(".animate-card-2",{y:0,opacity:1})));document.querySelector(".animate-card-3")&&(gsap.set(".animate-card-3",{y:50,opacity:0}),ScrollTrigger.batch(".animate-card-3",{interval:.1,batchMax:3,duration:3,onEnter:e=>gsap.to(e,{opacity:1,y:0,ease:"sine",stagger:{each:.15,grid:[1,3]},overwrite:!0}),onLeave:e=>gsap.set(e,{opacity:1,y:0,overwrite:!0}),onEnterBack:e=>gsap.to(e,{opacity:1,y:0,stagger:.15,overwrite:!0}),onLeaveBack:e=>gsap.set(e,{opacity:0,y:50,overwrite:!0})}),ScrollTrigger.addEventListener("refreshInit",()=>gsap.set(".animate-card-3",{y:0,opacity:1})));document.querySelector(".animate-card-4")&&(gsap.set(".animate-card-4",{y:50,opacity:0}),ScrollTrigger.batch(".animate-card-4",{interval:.1,batchMax:4,delay:1e3,onEnter:e=>gsap.to(e,{opacity:1,y:0,ease:"sine",stagger:{each:.15,grid:[1,4]},overwrite:!0}),onLeave:e=>gsap.set(e,{opacity:1,y:0,overwrite:!0}),onEnterBack:e=>gsap.to(e,{opacity:1,y:0,stagger:.15,overwrite:!0}),onLeaveBack:e=>gsap.set(e,{opacity:0,y:50,overwrite:!0})}),ScrollTrigger.addEventListener("refreshInit",()=>gsap.set(".animate-card-4",{y:0,opacity:1})));document.querySelector(".animate-card-5")&&(gsap.set(".animate-card-5",{y:50,opacity:0}),ScrollTrigger.batch(".animate-card-5",{interval:.1,batchMax:5,delay:1e3,onEnter:e=>gsap.to(e,{opacity:1,y:0,ease:"sine",stagger:{each:.15,grid:[1,5]},overwrite:!0}),onLeave:e=>gsap.set(e,{opacity:1,y:0,overwrite:!0}),onEnterBack:e=>gsap.to(e,{opacity:1,y:0,stagger:.15,overwrite:!0}),onLeaveBack:e=>gsap.set(e,{opacity:0,y:50,overwrite:!0})}),ScrollTrigger.addEventListener("refreshInit",()=>gsap.set(".animate-card-5",{y:0,opacity:1})));const C=document.querySelectorAll(".reveal-type");C.forEach((e,t)=>{const r=new SplitType(e,{types:"words, chars"});gsap.from(r.chars,{scrollTrigger:{trigger:e,start:"top 80%",end:"top 20%",scrub:!0,markers:!1},opacity:.2,stagger:.1})});const W=document.querySelectorAll("h2.reveal-type, h1.reveal-type");W.forEach(e=>{const t=new SplitType(e,{types:"words, chars"});t.chars.forEach(r=>{r.style.fontWeight=200,r.style.opacity=.2,r.style.fontVariationSettings="'wght' 200"}),gsap.to(t.chars,{scrollTrigger:{trigger:e,start:"top 80%",end:"top 20%",scrub:!0,markers:!1},opacity:1,fontWeight:800,stagger:.1,onUpdate:function(){this.targets().forEach(r=>{r.style.fontVariationSettings="'wght' "+r.style.fontWeight})}})});const O=()=>{const e=[...document.querySelectorAll(".items--gsap")];if(e){const t={el:null,width:0};e.forEach(r=>{t.el=r.querySelector(".items__container"),t.width=t.el.offsetWidth,t.el.innerHTML+=t.el.innerHTML;let o=gsap.timeline().add(R(t.el,20,"+=50%"),0),i=gsap.to(o,{duration:1.5,timeScale:1,paused:!0}),n=gsap.utils.clamp(1,6);ScrollTrigger.create({start:0,end:"max",onUpdate:s=>{o.timeScale(n(Math.abs(s.getVelocity()/200))),i.invalidate().restart()}})})}},R=(e,t,r)=>{let a=gsap.utils.wrap(0,50);return gsap.to(e,{duration:t,ease:"none",x:r,modifiers:{x:o=>r=a(parseFloat(o))+"%"},repeat:-1})};O();const v=document.querySelectorAll("[data-speed]");v.length&&gsap.to(v,{y:(e,t)=>(1-parseFloat(t.getAttribute("data-speed")))*ScrollTrigger.maxScroll(window),ease:"none",scrollTrigger:{start:0,end:"max",invalidateOnRefresh:!0,scrub:0}});const D=document.querySelector("testimonials-slider");D||new Swiper(".swiper-testimonials",{slidesPerView:1,spaceBetween:20,autoplay:!0,speed:1e3,loop:!0,loopFillGroupWithBlank:!0,pagination:{el:".swiper-pagination",type:"fraction"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});$(window).on("load",function(){var e=$(".animated-type");e.length&&document.getElementById("typed")&&new Typed("#typed",{stringsElement:"#typed-strings",loop:!0,typeSpeed:60,backSpeed:30,backDelay:2500})});$(function(){$(".popup-trigger").magnificPopup({type:"ajax",fixedContentPos:!0,fixedBgPos:!0,overflowY:"scroll",preloader:!1,midClick:!0,removalDelay:600,mainClass:"mfp-fade"}),$(".my-gallery").imagesLoaded().progress(function(){$(".my-gallery").masonry("layout")}),$('a[href*="#"]').not('[href="#"]').not('[href="#0"]').click(function(e){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=$(this.hash);t=t.length?t:$("[name="+this.hash.slice(1)+"]"),t.length&&(e.preventDefault(),$("html, body").animate({scrollTop:t.offset().top},1e3,function(){var r=$(t);if(r.focus(),r.is(":focus"))return!1;r.attr("tabindex","-1"),r.focus()}))}}),$(".hover-default, .hover-circle, .circle, .inner-video-trigger, .socials-cards__link").on("mouseenter",function(e){var t=$(this).offset(),r=e.pageX-t.left,a=e.pageY-t.top;$(this).find("em").css({top:a,left:r})}).on("mouseout",function(e){var t=$(this).offset(),r=e.pageX-t.left,a=e.pageY-t.top;$(this).find("em").css({top:a,left:r})}),Modernizr.svg||$("img[src*='svg']").attr("src",function(){return $(this).attr("src").replace(".svg",".png")});try{$.browserSelector(),$("html").hasClass("chrome")&&$.smoothScroll()}catch{}$("img, a").on("dragstart",function(e){e.preventDefault()}),/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?$("html").addClass("touch"):$("html").addClass("no-touch"),$(".gallery__link").each(function(){$(this).append('<div class="picture"></div>').children(".picture").css({"background-image":"url("+$(this).attr("data-image")+")"})}),$("#contact-form").submit(function(){var e=$(this);return $.ajax({type:"POST",url:"mail.php",data:e.serialize()}).done(function(){$(".contact").find(".form").addClass("is-hidden"),$(".contact").find(".form__reply").addClass("is-visible"),setTimeout(function(){$(".contact").find(".form__reply").removeClass("is-visible"),$(".contact").find(".form").delay(300).removeClass("is-hidden"),e.trigger("reset")},5e3)}),!1})});const w=document.querySelector(".color-switcher");function E(){let e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";return localStorage.getItem("template.theme")&&(e=localStorage.getItem("template.theme")),e}function k(e){document.querySelector(":root").setAttribute("color-scheme",`${e}`)}w&&w.addEventListener("click",()=>{let e=E();e==="dark"?e="light":e="dark",localStorage.setItem("template.theme",`${e}`),k(e)});window.addEventListener("DOMContentLoaded",()=>{k(E())});const l=document.querySelector(".about-image-1");l&&(gsap.set(l,{width:"100%",filter:"blur(8px)",scale:1.1}),gsap.to(l,{width:"100%",filter:"blur(0px)",scale:1,duration:1.5,ease:"power2.out",scrollTrigger:{trigger:l,start:"top 80%",end:"top 20%",scrub:!0,toggleActions:"play none reverse none"}}));const p=document.getElementById("typing-title");if(p){let i=function(){const n=e[t];a?(p.textContent=n.substring(0,r-1),r--,o=100):(p.textContent=n.substring(0,r+1),r++,o=150),!a&&r===n.length?(o=2e3,a=!0):a&&r===0&&(a=!1,t=(t+1)%e.length,o=500),setTimeout(i,o)};var F=i;const e=[".dev","deiv.dev",".Deiv"];let t=0,r=0,a=!1,o=150;setTimeout(i,1e3)}const P=document.querySelectorAll(".cards__title:not(.services-title)");P.forEach(e=>{const t=new SplitType(e,{types:"words, chars"});t.chars.forEach(r=>{r.style.fontWeight=200,r.style.opacity=.2,r.style.fontVariationSettings="'wght' 200"}),gsap.to(t.chars,{scrollTrigger:{trigger:e,start:"top 80%",end:"top 20%",scrub:!0,markers:!1},opacity:1,fontWeight:800,stagger:.1,onUpdate:function(){this.targets().forEach(r=>{r.style.fontVariationSettings="'wght' "+r.style.fontWeight})}})});const V=document.querySelectorAll(".services-title");V.forEach(e=>{const t=new SplitType(e,{types:"words, chars"});t.chars.forEach(r=>{r.style.fontWeight=800,r.style.fontVariationSettings="'wght' 800",r.style.opacity=.3}),gsap.to(t.chars,{scrollTrigger:{trigger:e,start:"top 80%",end:"top 20%",scrub:!0,markers:!1},opacity:1,stagger:.1})});document.querySelector(".service-card")&&(gsap.set(".service-card",{y:100,opacity:0}),ScrollTrigger.batch(".service-card",{interval:.1,batchMax:2,duration:6,onEnter:e=>gsap.to(e,{opacity:1,y:50,ease:"sine",stagger:{each:.15,grid:[1,2]},overwrite:!0},gsap.from(e.map(t=>t.querySelector(".service-image")),{opacity:1,y:"-90%",duration:1,ease:"power4.inout",stagger:.25})),onLeave:e=>gsap.set(e,{opacity:1,y:0,overwrite:!0}),onEnterBack:e=>gsap.to(e,{opacity:1,y:0,stagger:.15,overwrite:!0}),onLeaveBack:e=>gsap.set(e,{opacity:0,y:100,overwrite:!0})}),ScrollTrigger.addEventListener("refreshInit",()=>gsap.set(".service-card",{y:0,opacity:1})));const S=document.querySelector("main"),T=document.querySelector("section#contact");S&&T&&gsap.fromTo(S,{borderBottomLeftRadius:"0rem",borderBottomRightRadius:"0rem",boxShadow:"none"},{borderBottomLeftRadius:"5rem",borderBottomRightRadius:"5rem",boxShadow:"0 25px 50px -12px rgb(0 0 0 / 0.25)",scrollTrigger:{trigger:T,start:"bottom bottom",scrub:!0,onRefresh:e=>e.animation.invalidate()},overwrite:"auto"});
